

------   ç¬¬ä¸€é¡µ  æ¸¸æ ‡ç¿»é¡µ
EXEC dbo.qryByMonthShareV2
@fromTables      = 'pay_in_order_202601,pay_in_order_202512,pay_in_order_202511',
@whereExpression = 'WHERE [is_deleted] =0 and id<9999998888889998889',
@orderbyExprs    = 'ORDER BY id DESC',
@size            = 7

ğŸ‘‰ æœ€é€‚åˆä½ çš„å°±æ˜¯ï¼šShardingSphereâ€‘JDBCï¼ˆjar å½¢å¼ï¼‰
è·¨åˆ†ç‰‡å¤šè¡¨æŸ¥è¯¢ + åˆ†é¡µâ€çš„ä¸­é—´ä»¶
ğŸ¥‡ Apache ShardingSphereï¼ˆå¼ºçƒˆæ¨èï¼‰ éœ€è¦éƒ¨ç½²éº»çƒ¦
ShardingSphere æ˜¯ç›®å‰æœ€æˆç†Ÿã€æœ€ç¨³å®šã€æœ€çµæ´»çš„åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶ã€‚

å®ƒæ”¯æŒï¼š

å¤šåˆ†ç‰‡è¡¨è‡ªåŠ¨åˆå¹¶æŸ¥è¯¢

è‡ªåŠ¨ç”Ÿæˆ UNION ALL

è‡ªåŠ¨è·¨åˆ†ç‰‡æ’åº

è‡ªåŠ¨è·¨åˆ†ç‰‡åˆ†é¡µï¼ˆæ”¯æŒ LIMIT / OFFSET / TOPï¼‰

è‡ªåŠ¨è·¨åˆ†ç‰‡èšåˆï¼ˆSUM / COUNT / MAX / MINï¼‰

è‡ªåŠ¨è·¯ç”±åˆ°æŒ‡å®šåˆ†ç‰‡

æ”¯æŒ inlineã€complexã€hint ç­‰å¤šç§åˆ†ç‰‡ç­–ç•¥

ä½ å®Œå…¨å¯ä»¥é…ç½®æˆï¼š

yaml
tables:
pay_in_order:
actual-data-nodes: ds.pay_in_order_$->{202511..202601}
table-strategy:
standard:
sharding-column: order_month
sharding-algorithm-name: month-inline
ç„¶ååº”ç”¨å±‚ç›´æ¥å†™ï¼š

sql
SELECT *
FROM pay_in_order
WHERE is_deleted = 0
ORDER BY id DESC
LIMIT 7;
ShardingSphere ä¼šè‡ªåŠ¨ç”Ÿæˆï¼š

sql
SELECT * FROM pay_in_order_202601 ...
UNION ALL
SELECT * FROM pay_in_order_202512 ...
UNION ALL
SELECT * FROM pay_in_order_202511 ...
ORDER BY id DESC
LIMIT 7;
ä½ ä¸éœ€è¦å†™ UNION ALLï¼Œä¹Ÿä¸éœ€è¦å†™åˆ†ç‰‡è¡¨åã€‚

ğŸ¥ˆ MyCATï¼ˆä¹Ÿå¯ä»¥ï¼Œä½†ä¸å¦‚ ShardingSphere ç¨³å®šï¼‰
MyCAT ä¹Ÿæ”¯æŒï¼š

å¤šåˆ†ç‰‡æŸ¥è¯¢

åˆ†ç‰‡èšåˆ

åˆ†ç‰‡æ’åº

åˆ†ç‰‡åˆ†é¡µ

ä½† MyCAT çš„é—®é¢˜æ˜¯ï¼š

ç¨³å®šæ€§ä¸å¦‚ ShardingSphere

å¤§æŸ¥è¯¢å®¹æ˜“ OOM

åˆ†ç‰‡è·¯ç”±ä¸å¦‚ ShardingSphere çµæ´»

ç¤¾åŒºç»´æŠ¤ä¸å¦‚ä»¥å‰æ´»è·ƒ

å¦‚æœä½ æ˜¯æ–°é¡¹ç›®ï¼Œä¸å»ºè®®ç”¨ MyCATã€‚